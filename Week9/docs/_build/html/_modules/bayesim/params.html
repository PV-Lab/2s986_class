<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>bayesim.params &#8212; bayesim 0.9.1 documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-2.3.2/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>

        <a class="brand" href="../../index.html">
          bayesim</a>
        <span class="navbar-text pull-left"><b></b></span>

        <div class="nav-collapse">
          <ul class="nav">
            <li class="divider-vertical"></li>
            
                <li><a href="../../genindex.html">Index</a></li>
                <li><a href="https://github.com/pv-lab/bayesim">Github</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../gettingstarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../whybayesim.html">Why bayesim?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bayesics.html">Technical Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../manual.html">Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../citingbayesim.html">Citing bayesim</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"></ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
      </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="span12 content">
      
  <h1>Source code for bayesim.params</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">deepdish</span> <span class="k">as</span> <span class="nn">dd</span>
<span class="kn">from</span> <span class="nn">decimal</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">copy</span> <span class="k">import</span> <span class="n">deepcopy</span>

<div class="viewcode-block" id="Param"><a class="viewcode-back" href="../../source/bayesim.html#bayesim.params.Param">[docs]</a><span class="k">class</span> <span class="nc">Param</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A parameter in a bayesim analysis. Can be a fitting parameter or an experimental condition.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">argv</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a Param object.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (`str`): name of the parameter, required</span>
<span class="sd">            units (`str`): units in which parameter is measured (defaults to &#39;unitless&#39;)</span>
<span class="sd">            tolerance (`float`): smallest difference between two values of this parameter to consider &quot;real&quot;</span>
<span class="sd">            display_name (str): name for plotting (can include TeX), defaults to name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
        <span class="n">units</span> <span class="o">=</span> <span class="n">argv</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;units&#39;</span><span class="p">,</span><span class="s1">&#39;unitless&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="n">units</span>
        <span class="k">if</span> <span class="s1">&#39;tolerance&#39;</span> <span class="ow">in</span> <span class="n">argv</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_tolerance</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="s1">&#39;tolerance&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tolerance</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="s1">&#39;display_name&#39;</span> <span class="ow">in</span> <span class="n">argv</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">display_name</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="s1">&#39;display_name&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">display_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

<div class="viewcode-block" id="Param.set_tolerance"><a class="viewcode-back" href="../../source/bayesim.html#bayesim.params.Param.set_tolerance">[docs]</a>    <span class="k">def</span> <span class="nf">set_tolerance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tol</span><span class="p">,</span> <span class="n">islog</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the tolerance for this parameter.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;spacing&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span><span class="o">==</span><span class="s1">&#39;log&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tolerance</span> <span class="o">=</span> <span class="n">tol</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span><span class="o">==</span><span class="s1">&#39;linear&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tol_digits</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">tol</span><span class="p">))))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tolerance</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">tol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tol_digits</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tol_digits</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">tol</span><span class="p">))))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tolerance</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">tol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tol_digits</span><span class="p">)</span></div>

<div class="viewcode-block" id="Param.get_val_str"><a class="viewcode-back" href="../../source/bayesim.html#bayesim.params.Param.get_val_str">[docs]</a>    <span class="k">def</span> <span class="nf">get_val_str</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="n">tol_digits</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tolerance</span><span class="p">))))</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">tol_digits</span><span class="p">))</span></div></div>

<div class="viewcode-block" id="Fit_param"><a class="viewcode-back" href="../../source/bayesim.html#bayesim.params.Fit_param">[docs]</a><span class="k">class</span> <span class="nc">Fit_param</span><span class="p">(</span><span class="n">Param</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A bayesim fitting parameter. Because they will be initialized on a grid, each fitting parameter stores its full list of values as well as some other information such as the spacing between them and the minimum width of a box (used during grid subdivisions).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">argv</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the fitting parameter.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (`str`): name of the parameter, required</span>
<span class="sd">            units (`str`): units in which parameter is measured (defaults to &#39;unitless&#39;)</span>
<span class="sd">            tolerance (`float`): smallest difference between two values of this parameter to consider &quot;real&quot;, defaults to 0.1 of min_width</span>
<span class="sd">            val_range (:obj:`list` of :obj:`float`): [min, max] (either this or vals is required)</span>
<span class="sd">            vals (:obj:`list` of :obj:`float`): full list of vals for this param</span>
<span class="sd">            length (int): initial length of this parameter (defaults to 10)</span>
<span class="sd">            min_width(`float`): minimum box width for this parameter - subtractive if linear spacing and divisive if logarithmic (defaults to 0.01 of total range, required if providing val_range)</span>
<span class="sd">            spacing (str): &#39;linear&#39; or &#39;log&#39; (defaults to linear)</span>
<span class="sd">            verbose (bool): flag for verbosity</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># get spacing and length (or set defaults)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;vals&#39;</span> <span class="ow">in</span> <span class="n">argv</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span> <span class="o">=</span> <span class="n">argv</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;spacing&#39;</span><span class="p">,</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="n">argv</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;length&#39;</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">Param</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span> <span class="c1"># set name, units, tolerance</span>
        <span class="n">verbose</span> <span class="o">=</span> <span class="n">argv</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;verbose&#39;</span><span class="p">,</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># sanity check</span>
        <span class="k">assert</span> <span class="p">(</span><span class="s1">&#39;val_range&#39;</span> <span class="ow">in</span> <span class="n">argv</span> <span class="ow">or</span> <span class="s1">&#39;vals&#39;</span> <span class="ow">in</span> <span class="n">argv</span><span class="p">),</span> <span class="s2">&quot;You must provide a range of values for this fitting parameter!&quot;</span>

        <span class="c1"># compute edges and values</span>
        <span class="k">if</span> <span class="s1">&#39;vals&#39;</span> <span class="ow">in</span> <span class="n">argv</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">vals</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="s1">&#39;vals&#39;</span><span class="p">]</span>
            <span class="k">assert</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span><span class="o">&gt;=</span><span class="mi">2</span><span class="p">),</span> <span class="s2">&quot;vals should have at least two values&quot;</span>
            <span class="n">vals</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span>
            <span class="n">edges</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>

            <span class="k">if</span> <span class="s1">&#39;spacing&#39;</span> <span class="ow">in</span> <span class="n">argv</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="s1">&#39;spacing&#39;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># try to guess spacing</span>
                <span class="n">diffs</span> <span class="o">=</span> <span class="p">[</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span>
                <span class="n">ratios</span> <span class="o">=</span> <span class="p">[</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span>
                <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">diffs</span><span class="p">)</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">diffs</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">ratios</span><span class="p">)</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">ratios</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span> <span class="o">=</span> <span class="s1">&#39;linear&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span> <span class="o">=</span> <span class="s1">&#39;log&#39;</span>

            <span class="c1"># first edge</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span><span class="o">==</span><span class="s1">&#39;linear&#39;</span><span class="p">:</span>
                <span class="n">edges</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="mf">0.5</span><span class="o">*</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span><span class="o">==</span><span class="s1">&#39;log&#39;</span><span class="p">:</span>
                <span class="n">edges</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="p">((</span><span class="n">vals</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="n">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span>
            <span class="c1"># most of the edges</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">vals</span><span class="p">)):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span><span class="o">==</span><span class="s1">&#39;linear&#39;</span><span class="p">:</span>
                    <span class="n">edges</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="mf">0.5</span><span class="o">*</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span><span class="o">==</span><span class="s1">&#39;log&#39;</span><span class="p">:</span>
                    <span class="n">edges</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="p">((</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span>
            <span class="c1"># last edge</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span><span class="o">==</span><span class="s1">&#39;linear&#39;</span><span class="p">:</span>
                <span class="n">edges</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">vals</span><span class="p">)]</span> <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mf">0.5</span><span class="o">*</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">vals</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span><span class="o">==</span><span class="s1">&#39;log&#39;</span><span class="p">:</span>
                <span class="n">edges</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">vals</span><span class="p">)]</span> <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="p">((</span><span class="n">vals</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="n">vals</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="n">vals</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">val_range</span> <span class="o">=</span> <span class="p">[</span><span class="nb">min</span><span class="p">(</span><span class="n">edges</span><span class="p">),</span><span class="nb">max</span><span class="p">(</span><span class="n">edges</span><span class="p">)]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">edges</span> <span class="o">=</span> <span class="n">edges</span>

        <span class="k">elif</span> <span class="s1">&#39;val_range&#39;</span> <span class="ow">in</span> <span class="n">argv</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">val_range</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="s1">&#39;val_range&#39;</span><span class="p">]</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">val_range</span><span class="p">)</span><span class="o">==</span><span class="mi">2</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">val_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">val_range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;val_range must be of length 2 with second entry larger than first!&quot;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span> <span class="o">==</span> <span class="s1">&#39;linear&#39;</span><span class="p">:</span>
                <span class="n">edges_vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">val_range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">val_range</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="mi">2</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span> <span class="o">==</span> <span class="s1">&#39;log&#39;</span><span class="p">:</span>
                <span class="n">edges_vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logspace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">val_range</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">val_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span><span class="mi">2</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">edges</span> <span class="o">=</span> <span class="n">edges_vals</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="n">edges_vals</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>

        <span class="c1"># set min_width</span>
        <span class="k">if</span> <span class="s1">&#39;min_width&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">argv</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Setting min_width automatically for </span><span class="si">%s</span><span class="s1">.&#39;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span> <span class="o">==</span> <span class="s1">&#39;linear&#39;</span><span class="p">:</span>
                <span class="n">min_width</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">val_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">val_range</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span> <span class="o">==</span> <span class="s1">&#39;log&#39;</span><span class="p">:</span>
                <span class="n">min_width</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">val_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">val_range</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">**</span><span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">min_width</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="s1">&#39;min_width&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_width</span> <span class="o">=</span> <span class="n">min_width</span>

        <span class="c1"># set tolerance if not provided</span>
        <span class="k">if</span> <span class="s1">&#39;tolerance&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">argv</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span><span class="o">==</span><span class="s1">&#39;linear&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_tolerance</span><span class="p">(</span><span class="mf">0.1</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">min_width</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span><span class="o">==</span><span class="s1">&#39;log&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_tolerance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min_width</span><span class="o">**</span><span class="mf">0.1</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span><span class="o">==</span><span class="s1">&#39;linear&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_tolerance</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="s1">&#39;tolerance&#39;</span><span class="p">])</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span><span class="o">==</span><span class="s1">&#39;log&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_tolerance</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="s1">&#39;tolerance&#39;</span><span class="p">],</span> <span class="kc">True</span><span class="p">)</span>

        <span class="c1"># now round all the values based on tolerance</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span><span class="o">==</span><span class="s1">&#39;linear&#39;</span><span class="p">:</span> <span class="c1">#tolerance is subtractive</span>
            <span class="n">num_digits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_tol_digits</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">edges</span> <span class="o">=</span> <span class="p">[</span><span class="nb">round</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">num_digits</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="p">[</span><span class="nb">round</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">num_digits</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">val_range</span> <span class="o">=</span> <span class="p">[</span><span class="nb">round</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">num_digits</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">val_range</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span><span class="o">==</span><span class="s1">&#39;log&#39;</span><span class="p">:</span> <span class="c1">#tolerance is multiplicative</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_tol_digits</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_tol_digits</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">val_range</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">val_range</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_tol_digits</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">val_range</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>

<div class="viewcode-block" id="Fit_param.get_tol_digits"><a class="viewcode-back" href="../../source/bayesim.html#bayesim.params.Fit_param.get_tol_digits">[docs]</a>    <span class="k">def</span> <span class="nf">get_tol_digits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">argv</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Compute number of digits to round to. &#39;val&#39; must be provided if logspaced.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span><span class="o">==</span><span class="s1">&#39;linear&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tol_digits</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span><span class="o">==</span><span class="s1">&#39;log&#39;</span><span class="p">:</span>
            <span class="k">assert</span> <span class="s1">&#39;val&#39;</span> <span class="ow">in</span> <span class="n">argv</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="s2">&quot;If parameter is log-spaced, the value is needed to calculate tolerance digits!&quot;</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="s1">&#39;val&#39;</span><span class="p">]</span>
            <span class="n">tol_val</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">val</span> <span class="o">-</span> <span class="n">val</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">tolerance</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">tol_val</span><span class="p">))))</span><span class="o">+</span><span class="mi">1</span></div>

<div class="viewcode-block" id="Fit_param.get_closest_val"><a class="viewcode-back" href="../../source/bayesim.html#bayesim.params.Fit_param.get_closest_val">[docs]</a>    <span class="k">def</span> <span class="nf">get_closest_val</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return closest value to val in this parameters current set of vals.&quot;&quot;&quot;</span>
        <span class="n">diffs</span> <span class="o">=</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">val</span><span class="o">-</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">]</span>
        <span class="c1">#print(diffs)</span>
        <span class="c1">#print(diffs, min(diffs))</span>
        <span class="n">val_ind</span> <span class="o">=</span> <span class="n">diffs</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">diffs</span><span class="p">))</span>
        <span class="n">closest_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">val_ind</span><span class="p">]</span>
        <span class="n">digits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_tol_digits</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="n">closest_val</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">closest_val</span><span class="p">,</span> <span class="n">digits</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="nb">round</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">digits</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="mf">1.0</span><span class="p">)</span><span class="o">&gt;</span><span class="mf">0.01</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The values </span><span class="si">%f</span><span class="s2"> and </span><span class="si">%f</span><span class="s2"> were pretty far apart for </span><span class="si">%s</span><span class="s2">...&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">closest_val</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">closest_val</span></div>

<div class="viewcode-block" id="Fit_param.get_val_str"><a class="viewcode-back" href="../../source/bayesim.html#bayesim.params.Fit_param.get_val_str">[docs]</a>    <span class="k">def</span> <span class="nf">get_val_str</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a string with this parameter&#39;s value, reasonably formatted.&quot;&quot;&quot;</span>
        <span class="c1"># determine if it should be in scientific notation</span>
        <span class="k">if</span> <span class="n">val</span><span class="o">&gt;</span><span class="mf">1e4</span> <span class="ow">or</span> <span class="n">val</span><span class="o">&lt;</span><span class="mf">1e-4</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{:.2E}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tol_digits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_tol_digits</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="n">val</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">tol_digits</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">val</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;{0:.</span><span class="si">{1}</span><span class="s2">f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">tol_digits</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="Measured_param"><a class="viewcode-back" href="../../source/bayesim.html#bayesim.params.Measured_param">[docs]</a><span class="k">class</span> <span class="nc">Measured_param</span><span class="p">(</span><span class="n">Param</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A bayesim measured parameter. Can be experimental input or output.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">argv</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a Param object.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (`str`): name of the parameter, required</span>
<span class="sd">            units (`str`): units in which parameter is measured (defaults to &#39;unitless&#39;)</span>
<span class="sd">            tolerance (`float`): smallest difference between two values of this parameter to consider &quot;real,&quot; defaults to 1E-6</span>
<span class="sd">            param_type (`str`): &#39;input&#39; or &#39;output&#39;, defaults to input</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Param</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span> <span class="c1"># set name, units, tolerance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">param_type</span> <span class="o">=</span> <span class="n">argv</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;param_type&#39;</span><span class="p">,</span><span class="s1">&#39;input&#39;</span><span class="p">)</span>

        <span class="c1"># set tolerance if not provided</span>
        <span class="k">if</span> <span class="s1">&#39;tolerance&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">argv</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_tolerance</span><span class="p">(</span><span class="mf">1e-6</span><span class="p">)</span></div>

<div class="viewcode-block" id="Param_list"><a class="viewcode-back" href="../../source/bayesim.html#bayesim.params.Param_list">[docs]</a><span class="k">class</span> <span class="nc">Param_list</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Small class to facilitate listing and comparison of bayesim parameters.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">argv</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize an empty Param_list, or initialize from a dict if provided.</span>

<span class="sd">        Args:</span>
<span class="sd">            param_dict (`dict`): output of a call to as_dict()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_params</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ecs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ec_x_name</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="s1">&#39;param_dict&#39;</span> <span class="ow">in</span> <span class="n">argv</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">param_dict</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="s1">&#39;param_dict&#39;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">fp</span> <span class="ow">in</span> <span class="n">param_dict</span><span class="p">[</span><span class="s1">&#39;fit_params&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fit_params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Fit_param</span><span class="p">(</span><span class="o">**</span><span class="n">fp</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">ec</span> <span class="ow">in</span> <span class="n">param_dict</span><span class="p">[</span><span class="s1">&#39;ecs&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ecs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Measured_param</span><span class="p">(</span><span class="o">**</span><span class="n">ec</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">o_var</span> <span class="ow">in</span> <span class="n">param_dict</span><span class="p">[</span><span class="s1">&#39;output&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Measured_param</span><span class="p">(</span><span class="o">**</span><span class="n">o_var</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ec_x_name</span> <span class="o">=</span> <span class="n">param_dict</span><span class="p">[</span><span class="s1">&#39;ec_x_name&#39;</span><span class="p">]</span>

<div class="viewcode-block" id="Param_list.add_fit_param"><a class="viewcode-back" href="../../source/bayesim.html#bayesim.params.Param_list.add_fit_param">[docs]</a>    <span class="k">def</span> <span class="nf">add_fit_param</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">argv</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a fitting parameter to the list.</span>

<span class="sd">        Args:</span>
<span class="sd">            param (:class:`Fit_param`): A Fit_param object to add to the list</span>
<span class="sd">            name (str): name of the parameter, required if param object not passed</span>
<span class="sd">            units (str): units in which parameter is measured (defaults to &#39;unitless&#39;)</span>
<span class="sd">            tolerance (float): smallest difference between two values of this parameter to consider &quot;real&quot;</span>
<span class="sd">            val_range (`:obj:`list`` of :obj:`float`): [min, max] (either this or vals is required)</span>
<span class="sd">            vals (:obj:`list` of :obj:`float`): full list of vals for this param</span>
<span class="sd">            length (int): initial length of this parameter (defaults to 10)</span>
<span class="sd">            min_width(float): minimum box width for this parameter - subtractive if linear spacing and divisive if logarithmic (defaults to 0.01 of total range, required if providing val_range)</span>
<span class="sd">            spacing (str): &#39;linear&#39; or &#39;log&#39; (defaults to linear)</span>
<span class="sd">            verbose (bool): verbosity flag</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;name&#39;</span> <span class="ow">in</span> <span class="n">argv</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="s1">&#39;param&#39;</span> <span class="ow">in</span> <span class="n">argv</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="s1">&#39;param&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You must provide either a parameter name or a Fit_param object!&quot;</span><span class="p">)</span>
        <span class="n">verbose</span> <span class="o">=</span> <span class="n">argv</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;verbose&#39;</span><span class="p">,</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_present</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fit_params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Fit_param</span><span class="p">(</span><span class="o">**</span><span class="n">argv</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1"># overwrite</span>
            <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Overwriting metadata for fitting parameter </span><span class="si">%s</span><span class="s2"> with new info.&quot;</span><span class="o">%</span><span class="n">name</span><span class="p">)</span>
            <span class="n">param_ind</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_params</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">find_param</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
            <span class="k">if</span> <span class="s1">&#39;param&#39;</span> <span class="ow">in</span> <span class="n">argv</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fit_params</span><span class="p">[</span><span class="n">param_ind</span><span class="p">]</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="s1">&#39;param&#39;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">#print(argv)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fit_params</span><span class="p">[</span><span class="n">param_ind</span><span class="p">]</span> <span class="o">=</span> <span class="n">Fit_param</span><span class="p">(</span><span class="o">**</span><span class="n">argv</span><span class="p">)</span></div>

<div class="viewcode-block" id="Param_list.add_ec"><a class="viewcode-back" href="../../source/bayesim.html#bayesim.params.Param_list.add_ec">[docs]</a>    <span class="k">def</span> <span class="nf">add_ec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">argv</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add an experimental condition.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): name of the parameter, required</span>
<span class="sd">            units (str): units in which parameter is measured (defaults to &#39;unitless&#39;)</span>
<span class="sd">            tolerance (float): smallest difference between two values of this parameter to consider &quot;real,&quot; defaults to 1E-6</span>
<span class="sd">            is_x (bool): set this to be the x-axis variable when plotting data, defaults to False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_present</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]):</span>
            <span class="n">args</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span>
            <span class="n">args</span><span class="p">[</span><span class="s1">&#39;param_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;input&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ecs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Measured_param</span><span class="p">(</span><span class="o">**</span><span class="n">args</span><span class="p">))</span>
            <span class="n">is_x</span> <span class="o">=</span> <span class="n">argv</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;is_x&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">is_x</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ec_x</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;It looks like you&#39;re trying to add a duplicate experimental condition, </span><span class="si">%s</span><span class="s2">!&quot;</span><span class="o">%</span><span class="n">argv</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">])</span></div>

<div class="viewcode-block" id="Param_list.set_ec_x"><a class="viewcode-back" href="../../source/bayesim.html#bayesim.params.Param_list.set_ec_x">[docs]</a>    <span class="k">def</span> <span class="nf">set_ec_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param_name</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the x-variable for experimental conditions.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">param_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_names</span><span class="p">(</span><span class="s1">&#39;ec&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Adding the variable </span><span class="si">%s</span><span class="s2"> to the list of experimental conditions and setting it as the x-axis variable for plotting.&quot;</span><span class="o">%</span><span class="n">param_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_ec</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">param_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">ec_x_name</span><span class="o">==</span><span class="n">param_name</span><span class="p">:</span>
            <span class="k">pass</span> <span class="c1">#already done</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ec_x_name</span><span class="o">==</span><span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Overwriting previous ec_x variable (</span><span class="si">%s</span><span class="s2">) with </span><span class="si">%s</span><span class="s2">.&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ec_x_name</span><span class="p">,</span><span class="n">param_name</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ec_x_name</span> <span class="o">=</span> <span class="n">param_name</span></div>

<div class="viewcode-block" id="Param_list.get_ec_x"><a class="viewcode-back" href="../../source/bayesim.html#bayesim.params.Param_list.get_ec_x">[docs]</a>    <span class="k">def</span> <span class="nf">get_ec_x</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_param</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ec_x_name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Param_list.add_output"><a class="viewcode-back" href="../../source/bayesim.html#bayesim.params.Param_list.add_output">[docs]</a>    <span class="k">def</span> <span class="nf">add_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">argv</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add an output variable.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): name of the parameter, required</span>
<span class="sd">            units (str): units in which parameter is measured (defaults to &#39;unitless&#39;)</span>
<span class="sd">            tolerance (float): smallest difference between two values of this parameter to consider &quot;real,&quot; defaults to 1E-6</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_present</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]):</span>
            <span class="n">args</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span>
            <span class="n">args</span><span class="p">[</span><span class="s1">&#39;param_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;output&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Measured_param</span><span class="p">(</span><span class="o">**</span><span class="n">args</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;It looks like you&#39;re trying to add a duplicate output variable, </span><span class="si">%s</span><span class="s2">!&quot;</span><span class="o">%</span><span class="n">argv</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">])</span></div>

<div class="viewcode-block" id="Param_list.param_names"><a class="viewcode-back" href="../../source/bayesim.html#bayesim.params.Param_list.param_names">[docs]</a>    <span class="k">def</span> <span class="nf">param_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param_type</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a list of parameter names. If no arguments provided, output will be a dict, if a type is provided, output will be a list of just the parameter names of that type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">param_type</span><span class="o">==</span><span class="s1">&#39;fit&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_params</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">param_type</span><span class="o">==</span><span class="s1">&#39;ec&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ecs</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">param_type</span><span class="o">==</span><span class="s1">&#39;output&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">o</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;fit_params&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_params</span><span class="p">],</span>
                    <span class="s1">&#39;ec&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ec</span><span class="p">],</span>
                    <span class="s1">&#39;output&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">]}</span></div>

<div class="viewcode-block" id="Param_list.all_params"><a class="viewcode-back" href="../../source/bayesim.html#bayesim.params.Param_list.all_params">[docs]</a>    <span class="k">def</span> <span class="nf">all_params</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a flat list of all parameters of any type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_params</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">ecs</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">]</span></div>

<div class="viewcode-block" id="Param_list.param_present"><a class="viewcode-back" href="../../source/bayesim.html#bayesim.params.Param_list.param_present">[docs]</a>    <span class="k">def</span> <span class="nf">param_present</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check that the param name isn&#39;t already present in a list.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): name to check for</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">all_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_params</span><span class="p">()]</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">all_names</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Param_list.find_param"><a class="viewcode-back" href="../../source/bayesim.html#bayesim.params.Param_list.find_param">[docs]</a>    <span class="k">def</span> <span class="nf">find_param</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the Param object with the given name.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): name to search for</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_params</span><span class="p">()</span> <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">name</span><span class="o">==</span><span class="n">name</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span></div>

<div class="viewcode-block" id="Param_list.vals_equal"><a class="viewcode-back" href="../../source/bayesim.html#bayesim.params.Param_list.vals_equal">[docs]</a>    <span class="k">def</span> <span class="nf">vals_equal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param_name</span><span class="p">,</span> <span class="n">val1</span><span class="p">,</span> <span class="n">val2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compare two values of a given param.</span>

<span class="sd">        Args:</span>
<span class="sd">            param_name (str): name of parameter, must be in one of the lists</span>
<span class="sd">            val1, val2 (float): values to be compared</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if abs(val1-val2) &lt; tolerance of param_name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_param</span><span class="p">(</span><span class="n">param_name</span><span class="p">)[</span><span class="s1">&#39;tolerance&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">val1</span><span class="o">-</span><span class="n">val2</span><span class="p">)</span><span class="o">&lt;=</span><span class="n">tol</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Param_list.set_tolerance"><a class="viewcode-back" href="../../source/bayesim.html#bayesim.params.Param_list.set_tolerance">[docs]</a>    <span class="k">def</span> <span class="nf">set_tolerance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param_name</span><span class="p">,</span> <span class="n">tol</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the tolerance value for the given parameter.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">find_param</span><span class="p">(</span><span class="n">param_name</span><span class="p">)</span><span class="o">.</span><span class="n">set_tolerance</span><span class="p">(</span><span class="n">tol</span><span class="p">)</span></div>

<div class="viewcode-block" id="Param_list.is_empty"><a class="viewcode-back" href="../../source/bayesim.html#bayesim.params.Param_list.is_empty">[docs]</a>    <span class="k">def</span> <span class="nf">is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_params</span><span class="p">())</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Param_list.as_dict"><a class="viewcode-back" href="../../source/bayesim.html#bayesim.params.Param_list.as_dict">[docs]</a>    <span class="k">def</span> <span class="nf">as_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ec_x_name&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">ec_x_name</span><span class="p">}</span>
        <span class="n">d</span><span class="p">[</span><span class="s1">&#39;ecs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="vm">__dict__</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ecs</span><span class="p">]</span>
        <span class="n">d</span><span class="p">[</span><span class="s1">&#39;fit_params&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="vm">__dict__</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_params</span><span class="p">]</span>
        <span class="n">d</span><span class="p">[</span><span class="s1">&#39;output&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">o</span><span class="o">.</span><span class="vm">__dict__</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">d</span></div>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">as_dict</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;fit_params&#39;</span><span class="p">])):</span>
            <span class="n">d</span><span class="p">[</span><span class="s1">&#39;fit_params&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;edges&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;fit_params&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;edges&#39;</span><span class="p">])[:</span><span class="mi">70</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;...&#39;</span>
            <span class="n">d</span><span class="p">[</span><span class="s1">&#39;fit_params&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;vals&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;fit_params&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;vals&#39;</span><span class="p">])[:</span><span class="mi">70</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;...&#39;</span>
            <span class="n">d</span><span class="p">[</span><span class="s1">&#39;fit_params&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;val_range&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;fit_params&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;val_range&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span></div>
</pre></div>

    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2018, Rachel C Kurchin and Giuseppe Romano.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.<br/>
    </p>
  </div>
</footer>
  </body>
</html>